(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{247:function(e,t,a){},353:function(e,t,a){e.exports=a(716)},364:function(e,t){e.exports="data:image/png;base64,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"},498:function(e,t,a){},500:function(e,t,a){},716:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(74),c=a.n(o),i=(a(247),a(359),a(60)),l=a(330),u=a(331),m=a.n(u),p={lat:64,lng:27},s=a(364),f=[{name:"Mapnik",url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"},{name:"BlackAndWhite",url:"http://a.tile.stamen.com/toner/{z}/{x}/{y}.png"},{name:"Light",url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"},{name:"Dark",url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"},{name:"TopoMap",url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png"},{name:"NASA",url:"https://tileserver.maptiler.com/nasa/{z}/{x}/{y}.jpg"}],d=a(120),h=a(123),v=a(718),g=a(719),E=a(720),y=a(284),A=a(285),b=a(717),k=a(283),w=function(e){switch(e){case"t":return{unit:"degC",name:"Temperature"};case"r_1h":return{unit:"mm",name:"Precipitation"};default:return{unit:"cm",name:"Snowdepth"}}},j=function(e){var t=e.data,a=void 0===t?[]:t,n=e.type,o=w(n),c=o.unit,i=o.name;return r.a.createElement(v.a,{width:"100%",height:250},r.a.createElement(g.a,{data:a,margin:{top:40,right:30,left:20,bottom:20}},r.a.createElement(E.a,{strokeDasharray:"3 3"}),r.a.createElement(y.a,{dataKey:"time",tickFormatter:function(e){return e.substr(0,2)}}),r.a.createElement(A.a,{label:{value:c,angle:-90,position:"insideLeft"}}),r.a.createElement(b.a,{formatter:function(e){return e.toFixed("r_1h"===n?1:0)}}),r.a.createElement(k.a,{type:"monotone",dataKey:i,stroke:"#8884d8",fill:"#8884d8"})))},L=a(721),I=a(329),S=a(496),O=a(495),N=function(e){var t=e.data,a=void 0===t?[]:t,n=e.type;return r.a.createElement(v.a,{width:"100%",height:350},r.a.createElement(L.a,{layout:"vertical",width:600,height:400,data:a,margin:{top:30,right:30,bottom:20,left:20}},r.a.createElement(E.a,{stroke:"#f5f5f5"}),r.a.createElement(y.a,{type:"number"}),r.a.createElement(A.a,{dataKey:"date",type:"category",label:{value:"Day",angle:-90,position:"insideLeft"}}),r.a.createElement(b.a,{formatter:function(e){return"".concat(e.toFixed("r_1h"===n?1:0)," ").concat(w(n).unit)}}),r.a.createElement(I.a,null),r.a.createElement(S.a,{dataKey:"min",stackId:"a",fill:"#8884d8"}),r.a.createElement(S.a,{dataKey:"max",stackId:"a",fill:"#82ca9d"}),r.a.createElement(O.a,{dataKey:"average",stroke:"#17becf"})))},T=a(15),W=function(e){if(e){var t=new Date(e),a=[t.getDate(),t.getMonth()+1,t.getHours()],n=a[1],r=a[2];return"".concat(a[0],"/").concat(n,"(").concat(r,":00)")}},x=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var a=t?e.filter(function(e){return!isNaN(e)}):e.filter(function(e){return e&&!isNaN(e.value)}).map(function(e){return e.value}),n=a.length;return n?{average:a.reduce(function(e,t){return e+t})/n,arr:a}:{average:void 0}}},D=function(e,t){for(var a=[],n=function(n){var r=null,o=e.map(function(e,a){var o=e.data[t].timeValuePairs[n];return!r&&o&&(r=o.time),o});if(o.length){var c=x(o,!1).average;a.push(Object(T.a)({time:W(r)},w(t).name,c))}},r=0;r<145;r++)n(r);return{data:a,selectedLocInfo:1===e.length?e[0]:{}}},q=a(151),K=function(e,t,a,n){var r=Object(q.a)(e);t&&(r=e.filter(function(e){return e.info.id===t}));var o=D(r,a||"t"),c=o.data,i=o.selectedLocInfo,l=function(e,t){for(var a=e.map(function(e,a){var n=e.data[t].timeValuePairs.map(function(e){var t=e.time,a=e.value;return{date:W(t).substr(0,2),value:a}}),r={};return n.map(function(e){var t=e.date,a=e.value;return r.hasOwnProperty(t)||(r[t]=[]),r[t].push(a)}),Object.keys(r).map(function(e){var t=x(r[e]),a=t.average,n=t.arr;return a?{date:e,min:Math.min.apply(Math,Object(q.a)(n)),max:Math.max.apply(Math,Object(q.a)(n)),average:a}:{date:e,min:NaN,max:NaN,average:NaN}})}),n=[],r=function(e){if(a&&a.length){var t=(a&&a[0][e]).date,r=a.map(function(t){return t[e]&&t[e].min}),o=a.map(function(t){return t[e]&&t[e].max}),c=a.map(function(t){return t[e]&&t[e].average}),i=x(r).average,l=x(o).average,u=x(c).average;n.push({date:t,min:i,max:l,average:u})}},o=0;o<7;o++)r(o);return n}(r,a||"t");n({data:c,composedData:l,type:a||"t",selectedLocInfo:i})},M=a(343),B=a(344);function G(){var e=Object(d.a)(["\n  background: white;\n  border: none;\n  cursor: pointer;\n  font-size: 1.5em;\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.8;\n  }\n"]);return G=function(){return e},e}var F=h.a.button(G()),Z=function(e){var t=e.submit,a=e.selectedLocation,o=e.handleClick,c=Object(n.useState)("t"),l=Object(i.a)(c,2),u=l[0],m=l[1];return r.a.createElement("div",null,r.a.createElement(F,{disabled:!a,onClick:o},r.a.createElement(B.a,{icon:M.a}),"All Regions"),r.a.createElement("select",{value:u,onChange:function(e){t(e.target.value),m(e.target.value)}},r.a.createElement("option",{value:"t"},"Temperature"),r.a.createElement("option",{value:"snowdepth"},"Snowdepth"),r.a.createElement("option",{value:"r_1h"},"Precipitation")))},U=(a(498),function(e){var t=e.data||{},a=t.info,n=void 0===a?{}:a,o=t.position,c=void 0===o?{}:o,i=n.name,l=n.region,u=c.lat,m=c.lon;return r.a.createElement("div",null,r.a.createElement("div",{className:"info"},r.a.createElement("p",{style:{textTransform:"uppercase"}},i||r.a.createElement("span",null,"Name: ")),r.a.createElement("p",null,r.a.createElement("span",null,"Region: "),r.a.createElement("span",null,l)),r.a.createElement("p",null,r.a.createElement("span",null,"Latitude: "),r.a.createElement("span",null,u)),r.a.createElement("p",null,r.a.createElement("span",null,"Longtitude: "),r.a.createElement("span",null,m))),l?null:r.a.createElement("pre",null,"Choose location from Map"))});function P(){var e=Object(d.a)(["\n  & > div:first-child {\n    display: flex;\n    justify-content: space-between;\n  }\n"]);return P=function(){return e},e}var Q=Object(h.a)(function(e){var t=e.selectedLocation,a=e.observeLocations,o=e.className,c=e.clearSelectedLocation,l=Object(n.useState)({data:[],composedData:[],selectedLocInfo:{},type:""}),u=Object(i.a)(l,2),m=u[0],p=u[1];Object(n.useEffect)(function(){var e=m.type;K(a,t,e,p)},[a,t]);var s=m.data,f=m.composedData,d=m.type,h=m.selectedLocInfo;return r.a.createElement("div",{className:o},r.a.createElement(Z,{submit:function(e){return K(a,t,e,p)},selectedLocation:t,handleClick:function(){var e=D(a,d);c(),p({data:e,type:d})}}),r.a.createElement(U,{data:h}),r.a.createElement(j,{data:s,type:d}),r.a.createElement(N,{data:f,type:d}))})(P()),V=a(323),z=a(133),C=a(326),J=a(324),R=a(325),X=a(322),H=a(327),Y=a(10),_=a.n(Y),$=(a(500),a(347));function ee(){var e=Object(d.a)(["\n  height: 120vh;\n"]);return ee=function(){return e},e}delete _.a.Icon.Default.prototype._getIconUrl,_.a.Icon.Default.mergeOptions({iconRetinaUrl:a(713),iconUrl:a(714),shadowUrl:a(715)});var te=Object(h.a)(V.a)(ee()),ae=function(e){var t=e.observeLocations,a=e.selectedLocation,o=e.setSelectedLocation,c=Object(n.useState)(p),l=Object(i.a)(c,2),u=l[0],m=l[1],d=new _.a.Icon.Default,h=new _.a.Icon.Default({iconUrl:s,className:"blinking"}),v=f.map(function(e,t){var a=e.name,n=e.url;return r.a.createElement(z.b.BaseLayer,{key:t,name:a,checked:"Mapnik"===a},r.a.createElement(C.a,{attribution:"&copy; <a href=&quot;http://www.openstreetmap.org/copyright&quot;>OpenStreetMap</a> &copy; <a href=&quot;https://carto.com/attributions&quot;>CARTO</a> &copy; <a href=&quot;https://opentopomap.org&quot;>OpenTopoMap</a> &copy; <a href=&quot;http://stamen.com&quot;>StamenDesign</a> &copy; <a href=&quot;http://tileserver.maptiler.com&quot;>NASA</a>",url:n,maxZoom:19}))}),g=t.sort(function(e,t){return e.info.region<t.info.region?-1:1}).map(function(e){var t=e.position,n=t.lat,c=t.lon,i=e.info,l=i.id,u=i.region;return r.a.createElement(z.b.Overlay,{key:l,name:u,checked:!0},r.a.createElement(J.a,{key:l,icon:a===l?h:d,position:[n,c],onClick:function(e){return o(l)},onMouseOver:function(e){return e.target.openPopup()},onMouseOut:function(e){return e.target.closePopup()},popupopen:!0},r.a.createElement(R.a,null,u)))}),E=r.a.createElement(X.a,{center:u,radius:5,opacity:.1},r.a.createElement(H.a,{permanent:64!==u.lat},r.a.createElement("span",null,u.lat.toFixed(3)," "),"|",r.a.createElement("span",null," ",u.lng.toFixed(3))));return r.a.createElement(te,{center:u,zoom:5.4,touchZoom:!0,onClick:function(e){return m(e.latlng)}},r.a.createElement(z.b,{position:"topright"},v,r.a.createElement($.ReactLeafletSearch,{position:"topright",showMarker:!1}),g),E)},ne=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(null),u=Object(i.a)(c,2),p=u[0],s=u[1];Object(n.useEffect)(function(){return function(e){var t=new m.a.WfsConnection;t.connect("https://opendata.fmi.fi/wfs","fmi::observations::weather::cities::multipointcoverage")&&t.getData({begin:Date.now()-5184e5,end:Date.now(),requestParameter:"t,snowdepth,r_1h",timestep:36e5,bbox:"20.6455928891, 59.846373196, 31.5160921567, 70.1641930203",callback:function(a,n){n.length>0?n.forEach(function(e){console.error("FMI API error: "+e.errorText)}):(e(a.locations.map(function(e){var t=e.info.position.map(parseFloat),a=Object(i.a)(t,2),n=a[0],r=a[1];return Object(l.a)({},e,{position:{lat:n,lon:r}})})),t.disconnect())}})}(o)},[]);return r.a.createElement("div",{className:"App"},r.a.createElement(Q,{selectedLocation:p,observeLocations:a,className:"sidebar",clearSelectedLocation:function(){s(null)}}),r.a.createElement(ae,{observeLocations:a,selectedLocation:p,setSelectedLocation:s}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[353,2,1]]]);
//# sourceMappingURL=main.31365814.chunk.js.map