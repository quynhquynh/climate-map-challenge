{"version":3,"sources":["img/icons8-marker-100.png","var/index.js","util/defineLabel.js","components/TimeValueArea.js","components/DateValue.js","containers/Form.js","components/Info.js","util/formatDateTime.js","util/calcAverage.js","util/constructAreaChartData.js","util/handleChartSetter.js","util/constructComposedChartData.js","containers/Sidebar.js","containers/Map.js","App.js","util/fetchObservationLocations.js","serviceWorker.js","index.js"],"names":["module","exports","defaultCoordinate","lat","lng","iconUrl","require","layerOptions","name","url","defaultLayer","defineLabel","type","unit","TimeValueArea","_ref","_ref$data","data","_defineLabel","react_default","a","createElement","ResponsiveContainer","width","height","AreaChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","tickFormatter","value","substr","YAxis","label","angle","position","Tooltip","formatter","toFixed","Area","stroke","fill","DateValue","ComposedChart","layout","concat","Legend","Bar","stackId","Line","Button","styled","button","_templateObject","Form","submit","selectedLocation","handleClick","_useState","useState","_useState2","Object","slicedToArray","setType","disabled","onClick","react_fontawesome_index_es","icon","faGlobeEurope","onChange","e","target","Info","_ref2","_ref2$info","info","_ref2$position","region","lon","className","style","textTransform","formatDateTime","timestamp","timeString","Date","getDate","getMonth","getHours","month","time","calcAverage","arr","Array","isArray","length","average","undefined","truthy","filter","v","isNaN","item","map","len","reduce","b","constructAreaChartData","groupType","_loop","i","allCitiesPair","loc","index","pair","timeValuePairs","push","defineProperty","observeHours","selectedLocInfo","handleChartSetter","id","setter","clone","toConsumableArray","_constructAreaChartDa","composedData","allRegionsData","dateValuePairs","date","seen","hasOwnProperty","keys","_calcAverage","min","NaN","max","Math","apply","finalData","oneDayMin","oneDayMax","oneDayAvg","observeDays","constructComposedChartData","observeLocations","clearSelectedLocation","chartData","setChartData","useEffect","containers_Form","components_Info","components_TimeValueArea","components_DateValue","Sidebar_templateObject","L","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","shadowUrl","MapContainer","LeafletMap","Map_templateObject","Map","setSelectedLocation","latlng","setLatLng","clickIcon","layers","LayersControl","BaseLayer","key","checked","TileLayer","attribution","maxZoom","markers","sort","_ref3","_ref3$position","_ref3$info","Overlay","Marker","onMouseOver","openPopup","onMouseOut","closePopup","popupopen","Popup","clickedCircle","CircleMarker","center","radius","opacity","es_Tooltip","permanent","zoom","touchZoom","lib","showMarker","App","setObservationLocations","_useState3","_useState4","connection","Metolib","WfsConnection","connect","getData","begin","now","end","requestParameter","timestep","bbox","callback","errors","forEach","err","console","error","errorText","locations","_loc$info$position$ma","parseFloat","_loc$info$position$ma2","objectSpread","disconnect","fetchObservationLocation","containers_Sidebar","containers_Map","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.15f945e8.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","export const attribution =\r\n  \"&copy; <a href=&quot;http://www.openstreetmap.org/copyright&quot;>OpenStreetMap</a> &copy; <a href=&quot;https://carto.com/attributions&quot;>CARTO</a> &copy; <a href=&quot;https://opentopomap.org&quot;>OpenTopoMap</a> &copy; <a href=&quot;http://stamen.com&quot;>StamenDesign</a> &copy; <a href=&quot;http://tileserver.maptiler.com&quot;>NASA</a>\";\r\n\r\nexport const defaultCoordinate = { lat: 64, lng: 27 };\r\n\r\nexport const defaultType = \"t\";\r\n\r\nexport const observeDays = 6;\r\n\r\nexport const observeHours = 24 * observeDays;\r\n\r\n// for clicked icon\r\nexport const iconUrl = require(\"../img/icons8-marker-100.png\");\r\n\r\nexport const layerOptions = [\r\n  { name: \"Mapnik\", url: \"http://{s}.tile.osm.org/{z}/{x}/{y}.png\" },\r\n  {\r\n    name: \"BlackAndWhite\",\r\n    url: \"http://a.tile.stamen.com/toner/{z}/{x}/{y}.png\"\r\n  },\r\n  {\r\n    name: \"Light\",\r\n    url: \"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\"\r\n  },\r\n  {\r\n    name: \"Dark\",\r\n    url: \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\"\r\n  },\r\n  {\r\n    name: \"TopoMap\",\r\n    url: \"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png\"\r\n  },\r\n  {\r\n    name: \"NASA\",\r\n    url: \"https://tileserver.maptiler.com/nasa/{z}/{x}/{y}.jpg\"\r\n  }\r\n];\r\n\r\nexport const defaultLayer = layerOptions[0].name;\r\n","export default type => {\r\n  switch (type) {\r\n    case \"t\":\r\n      return {\r\n        unit: \"degC\",\r\n        name: \"Temperature\"\r\n      };\r\n    case \"r_1h\":\r\n      return {\r\n        unit: \"mm\",\r\n        name: \"Precipitation\"\r\n      };\r\n    default:\r\n      return {\r\n        unit: \"cm\",\r\n        name: \"Snowdepth\"\r\n      };\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { string, array } from \"prop-types\";\r\nimport {\r\n  AreaChart,\r\n  Area,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer\r\n} from \"recharts\";\r\n\r\nimport defineLabel from \"../util/defineLabel\";\r\n\r\nconst TimeValueArea = ({ data = [], type }) => {\r\n  const { unit, name } = defineLabel(type);\r\n  return (\r\n    <ResponsiveContainer width=\"100%\" height={250}>\r\n      <AreaChart\r\n        data={data}\r\n        margin={{ top: 40, right: 30, left: 20, bottom: 20 }}\r\n      >\r\n        <CartesianGrid strokeDasharray=\"3 3\" />\r\n        <XAxis dataKey=\"time\" tickFormatter={value => value.substr(0, 2)} />\r\n        <YAxis\r\n          label={{\r\n            value: unit,\r\n            angle: -90,\r\n            position: \"insideLeft\"\r\n          }}\r\n        />\r\n        <Tooltip formatter={value => value.toFixed(type === \"r_1h\" ? 1 : 0)} />\r\n        <Area type=\"monotone\" dataKey={name} stroke=\"#8884d8\" fill=\"#8884d8\" />\r\n      </AreaChart>\r\n    </ResponsiveContainer>\r\n  );\r\n};\r\n\r\nexport default TimeValueArea;\r\n\r\nTimeValueArea.propTypes = {\r\n  data: array,\r\n  type: string.isRequired\r\n};\r\n","import React from \"react\";\r\nimport { array, string } from \"prop-types\";\r\nimport {\r\n  ComposedChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  Line,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  Legend\r\n} from \"recharts\";\r\n\r\nimport defineLabel from \"../util/defineLabel\";\r\n\r\nconst DateValue = ({ data = [], type }) => (\r\n  <ResponsiveContainer width=\"100%\" height={350}>\r\n    <ComposedChart\r\n      layout=\"vertical\"\r\n      width={600}\r\n      height={400}\r\n      data={data}\r\n      margin={{ top: 30, right: 30, bottom: 20, left: 20 }}\r\n    >\r\n      <CartesianGrid stroke=\"#f5f5f5\" />\r\n      <XAxis type=\"number\" />\r\n      <YAxis\r\n        dataKey=\"date\"\r\n        type=\"category\"\r\n        label={{\r\n          value: \"Day\",\r\n          angle: -90,\r\n          position: \"insideLeft\"\r\n        }}\r\n      />\r\n      <Tooltip\r\n        formatter={value =>\r\n          `${value.toFixed(type === \"r_1h\" ? 1 : 0)} ${defineLabel(type).unit}`\r\n        }\r\n      />\r\n      <Legend />\r\n      <Bar dataKey=\"min\" stackId=\"a\" fill=\"#8884d8\" />\r\n      <Bar dataKey=\"max\" stackId=\"a\" fill=\"#82ca9d\" />\r\n      <Line dataKey=\"average\" stroke=\"#17becf\" />\r\n    </ComposedChart>\r\n  </ResponsiveContainer>\r\n);\r\n\r\nexport default DateValue;\r\n\r\nDateValue.propTypes = {\r\n  data: array,\r\n  type: string.isRequired\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { faGlobeEurope } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { defaultType } from \"../var\";\r\n\r\nconst Button = styled.button`\r\n  background: white;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 1.5em;\r\n\r\n  &:disabled {\r\n    cursor: not-allowed;\r\n    opacity: 0.8;\r\n  }\r\n`;\r\n\r\nconst Form = ({ submit, selectedLocation, handleClick }) => {\r\n  const [type, setType] = useState(defaultType);\r\n\r\n  const handleChange = e => {\r\n    submit(e.target.value);\r\n    setType(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button disabled={!selectedLocation} onClick={handleClick}>\r\n        <FontAwesomeIcon icon={faGlobeEurope} />\r\n        All Regions\r\n      </Button>\r\n      <select value={type} onChange={handleChange}>\r\n        <option value=\"t\">Temperature</option>\r\n        <option value=\"snowdepth\">Snowdepth</option>\r\n        <option value=\"r_1h\">Precipitation</option>\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React from \"react\";\r\nimport \"../style/info.css\";\r\n\r\nconst Info = ({ data }) => {\r\n  const { info = {}, position = {} } = data || {};\r\n  const { name, region } = info;\r\n  const { lat, lon } = position;\r\n  return (\r\n    <div>\r\n      <div className=\"info\">\r\n        <p style={{ textTransform: \"uppercase\" }}>\r\n          {!name ? <span>Name: </span> : name}\r\n        </p>\r\n        <p>\r\n          <span>Region: </span>\r\n          <span>{region}</span>\r\n        </p>\r\n        <p>\r\n          <span>Latitude: </span>\r\n          <span>{lat}</span>\r\n        </p>\r\n        <p>\r\n          <span>Longtitude: </span>\r\n          <span>{lon}</span>\r\n        </p>\r\n      </div>\r\n      {!region ? <pre>*Choose location from Map</pre> : null}\r\n    </div>\r\n  );\r\n};\r\nexport default Info;\r\n","export default timestamp => {\r\n  if (timestamp) {\r\n    const timeString = new Date(timestamp);\r\n    const [date, month, time] = [\r\n      timeString.getDate(),\r\n      timeString.getMonth() + 1,\r\n      timeString.getHours()\r\n    ];\r\n    const finalTime = `${date}/${month}(${time}:00)`;\r\n    return finalTime;\r\n  }\r\n};\r\n","export default arr => {\r\n  if (Array.isArray(arr)) {\r\n    if (!arr.length) {\r\n      return { average: undefined };\r\n    }\r\n    const truthy =\r\n      typeof arr[0] === \"number\"\r\n        ? arr.filter(v => !isNaN(v))\r\n        : arr.filter(item => item && !isNaN(item.value)).map(v => v.value);\r\n\r\n    const len = truthy.length;\r\n    if (!len) {\r\n      return { average: undefined };\r\n    }\r\n    const sum = truthy.reduce((a, b) => a + b);\r\n    return {\r\n      average: sum / len,\r\n      arr: truthy\r\n    };\r\n  }\r\n};\r\n","import { observeHours } from \"../var\";\r\nimport formatDateTime from \"./formatDateTime\";\r\nimport calcAverage from \"./calcAverage\";\r\nimport defineLabel from \"./defineLabel\";\r\n\r\nexport default (data, type) => {\r\n  const groupType = [];\r\n  for (let i = 0; i < observeHours + 1; i++) {\r\n    let time = null;\r\n    const allCitiesPair = data.map((loc, index) => {\r\n      const pair = loc.data[type].timeValuePairs[i];\r\n      if (!time && pair) time = pair.time;\r\n      return pair;\r\n    });\r\n\r\n    if (allCitiesPair.length) {\r\n      const { average } = calcAverage(allCitiesPair);\r\n      groupType.push({\r\n        time: formatDateTime(time),\r\n        [defineLabel(type).name]: average\r\n      });\r\n    }\r\n  }\r\n  return {\r\n    data: groupType,\r\n    selectedLocInfo: data.length === 1 ? data[0] : {}\r\n  };\r\n};\r\n","import { defaultType } from \"../var\";\r\nimport constructAreaChartData from \"./constructAreaChartData\";\r\nimport constructComposedChartData from \"./constructComposedChartData\";\r\n\r\nexport default (arr, id, type, setter) => {\r\n  let clone = [...arr];\r\n  if (id) {\r\n    clone = arr.filter(a => a.info.id === id);\r\n  }\r\n  const { data, selectedLocInfo } = constructAreaChartData(\r\n    clone,\r\n    type || defaultType\r\n  );\r\n  const composedData = constructComposedChartData(clone, type || defaultType);\r\n  setter({ data, composedData, type: type || defaultType, selectedLocInfo });\r\n};\r\n","import formatDateTime from \"./formatDateTime\";\r\nimport calcAverage from \"./calcAverage\";\r\nimport { observeDays } from \"../var\";\r\n\r\nexport default (data, type) => {\r\n  // get all min, max, average of all regions by day\r\n  const allRegionsData = data.map((region, i) => {\r\n    const pairs = region.data[type].timeValuePairs;\r\n    const dateValuePairs = pairs.map(({ time, value }) => {\r\n      const date = formatDateTime(time).substr(0, 2);\r\n      return { date, value };\r\n    });\r\n    const seen = {};\r\n    dateValuePairs.map(({ date, value }) => {\r\n      if (!seen.hasOwnProperty(date)) {\r\n        seen[date] = [];\r\n      }\r\n      return seen[date].push(value);\r\n    });\r\n    const keys = Object.keys(seen);\r\n    const regionMinMaxAvg = keys.map(date => {\r\n      const { average, arr } = calcAverage(seen[date]);\r\n      if (average === undefined) {\r\n        return { date, min: NaN, max: NaN, average: NaN };\r\n      }\r\n      const min = Math.min(...arr);\r\n      const max = Math.max(...arr);\r\n      return { date, min, max, average };\r\n    });\r\n    return regionMinMaxAvg;\r\n  });\r\n  // calculate average of all min, max, average for each days\r\n  const finalData = [];\r\n  for (let i = 0; i < observeDays + 1; i++) {\r\n    if (allRegionsData && allRegionsData.length) {\r\n      const { date } =\r\n        allRegionsData &&\r\n        allRegionsData[0][i] !== undefined &&\r\n        allRegionsData[0][i];\r\n      const oneDayMin = allRegionsData.map(\r\n        region => region[i] && region[i].min\r\n      );\r\n      const oneDayMax = allRegionsData.map(\r\n        region => region[i] && region[i].max\r\n      );\r\n      const oneDayAvg = allRegionsData.map(\r\n        region => region[i] && region[i].average\r\n      );\r\n      const min = calcAverage(oneDayMin).average;\r\n      const max = calcAverage(oneDayMax).average;\r\n      const average = calcAverage(oneDayAvg).average;\r\n      finalData.push({ date, min, max, average });\r\n    }\r\n  }\r\n  return finalData;\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { number, arrayOf, oneOfType, object, shape, string } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\n\r\nimport TimeValueArea from \"../components/TimeValueArea\";\r\nimport DateValue from \"../components/DateValue\";\r\nimport Form from \"./Form\";\r\nimport Info from \"../components/Info\";\r\n\r\nimport constructAreaChartData from \"../util/constructAreaChartData\";\r\nimport handleChartSetter from \"../util/handleChartSetter\";\r\n\r\nfunction Sidebar({\r\n  selectedLocation,\r\n  observeLocations,\r\n  className,\r\n  clearSelectedLocation\r\n}) {\r\n  const [chartData, setChartData] = useState({\r\n    data: [],\r\n    composedData: [],\r\n    selectedLocInfo: {},\r\n    type: \"\"\r\n  });\r\n\r\n  useEffect(\r\n    () => {\r\n      const { type } = chartData;\r\n      handleChartSetter(observeLocations, selectedLocation, type, setChartData);\r\n    },\r\n    [observeLocations, selectedLocation]\r\n  );\r\n\r\n  const handleType = type =>\r\n    handleChartSetter(observeLocations, selectedLocation, type, setChartData);\r\n\r\n  const setData = () => {\r\n    const data = constructAreaChartData(observeLocations, type);\r\n    clearSelectedLocation();\r\n    setChartData({ data, type });\r\n  };\r\n\r\n  const { data, composedData, type, selectedLocInfo } = chartData;\r\n\r\n  return (\r\n    <div className={className}>\r\n      <Form\r\n        submit={handleType}\r\n        selectedLocation={selectedLocation}\r\n        handleClick={setData}\r\n      />\r\n      <Info data={selectedLocInfo} />\r\n      <TimeValueArea data={data} type={type} />\r\n      <DateValue data={composedData} type={type} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default styled(Sidebar)`\r\n  & > div:first-child {\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n`;\r\n\r\nSidebar.propTypes = {\r\n  selectedLocation: oneOfType([string, object]),\r\n  observeLocations: arrayOf(\r\n    shape({\r\n      position: shape({\r\n        lat: number.isRequired,\r\n        lon: number.isRequired\r\n      }),\r\n      info: shape({\r\n        id: string.isRequired,\r\n        region: string.isRequired\r\n      })\r\n    }).isRequired\r\n  ),\r\n  className: string.isRequired\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { arrayOf, shape, number, string, func } from \"prop-types\";\r\nimport {\r\n  Map as LeafletMap,\r\n  Marker,\r\n  TileLayer,\r\n  Popup,\r\n  LayersControl,\r\n  CircleMarker,\r\n  Tooltip\r\n} from \"react-leaflet\";\r\nimport { ReactLeafletSearch } from \"react-leaflet-search\";\r\nimport L from \"leaflet\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  attribution,\r\n  layerOptions,\r\n  defaultCoordinate,\r\n  iconUrl,\r\n  defaultLayer\r\n} from \"../var\";\r\nimport \"../style/map.css\";\r\n\r\n// Ugly hack to fix Leaflet icons with leaflet loaders\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\"),\r\n  iconUrl: require(\"leaflet/dist/images/marker-icon.png\"),\r\n  shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\")\r\n});\r\n\r\nconst MapContainer = styled(LeafletMap)`\r\n  height: 120vh;\r\n`;\r\n\r\nconst Map = ({ observeLocations, selectedLocation, setSelectedLocation }) => {\r\n  const [latlng, setLatLng] = useState(defaultCoordinate);\r\n\r\n  const icon = new L.Icon.Default();\r\n\r\n  const clickIcon = new L.Icon.Default({ iconUrl, className: \"blinking\" });\r\n\r\n  const layers = layerOptions.map(({ name, url }, i) => (\r\n    <LayersControl.BaseLayer\r\n      key={i}\r\n      name={name}\r\n      checked={name === defaultLayer}\r\n    >\r\n      <TileLayer attribution={attribution} url={url} maxZoom={19} />\r\n    </LayersControl.BaseLayer>\r\n  ));\r\n\r\n  const markers = observeLocations\r\n    .sort((a, b) => (a.info.region < b.info.region ? -1 : 1))\r\n    .map(({ position: { lat, lon }, info: { id, region } }) => (\r\n      <LayersControl.Overlay key={id} name={region} checked={true}>\r\n        <Marker\r\n          key={id}\r\n          icon={selectedLocation === id ? clickIcon : icon}\r\n          position={[lat, lon]}\r\n          onClick={e => setSelectedLocation(id)}\r\n          onMouseOver={e => e.target.openPopup()}\r\n          onMouseOut={e => e.target.closePopup()}\r\n          popupopen={true}\r\n        >\r\n          <Popup>{region}</Popup>\r\n        </Marker>\r\n      </LayersControl.Overlay>\r\n    ));\r\n\r\n  const clickedCircle = (\r\n    <CircleMarker center={latlng} radius={5} opacity={0.1}>\r\n      <Tooltip permanent={latlng.lat === 64 ? false : true}>\r\n        <span>{latlng.lat.toFixed(3)} </span>|\r\n        <span> {latlng.lng.toFixed(3)}</span>\r\n      </Tooltip>\r\n    </CircleMarker>\r\n  );\r\n\r\n  return (\r\n    <MapContainer\r\n      center={latlng}\r\n      zoom={5.4}\r\n      touchZoom={true}\r\n      onClick={e => setLatLng(e.latlng)}\r\n    >\r\n      <LayersControl position=\"topright\">\r\n        {layers}\r\n        <ReactLeafletSearch position=\"topright\" showMarker={false} />\r\n        {markers}\r\n      </LayersControl>\r\n      {clickedCircle}\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n\r\nMap.propTypes = {\r\n  observeLocations: arrayOf(\r\n    shape({\r\n      position: shape({\r\n        lat: number.isRequired,\r\n        lon: number.isRequired\r\n      }),\r\n      info: shape({\r\n        id: string.isRequired,\r\n        region: string.isRequired\r\n      })\r\n    }).isRequired\r\n  ),\r\n  selectedLocation: string,\r\n  setSelectedLocation: func.isRequired\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./style/app.css\";\r\n\r\nimport fetchObservationLocation from \"./util/fetchObservationLocations\";\r\nimport Sidebar from \"./containers/Sidebar\";\r\nimport Map from \"./containers/Map\";\r\n\r\nconst App = () => {\r\n  const [observeLocations, setObservationLocations] = useState([]);\r\n\r\n  const [selectedLocation, setSelectedLocation] = useState(null);\r\n\r\n  useEffect(() => fetchObservationLocation(setObservationLocations), []);\r\n\r\n  const clearSelectedLocation = () => {\r\n    setSelectedLocation(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Sidebar\r\n        selectedLocation={selectedLocation}\r\n        observeLocations={observeLocations}\r\n        className=\"sidebar\"\r\n        clearSelectedLocation={clearSelectedLocation}\r\n      />\r\n      <Map\r\n        observeLocations={observeLocations}\r\n        selectedLocation={selectedLocation}\r\n        setSelectedLocation={setSelectedLocation}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import Metolib from \"@fmidev/metolib\";\r\nimport { observeHours } from \"../var\";\r\n\r\nexport default setter => {\r\n  const connection = new Metolib.WfsConnection();\r\n  if (\r\n    connection.connect(\r\n      \"https://opendata.fmi.fi/wfs\",\r\n      \"fmi::observations::weather::cities::multipointcoverage\"\r\n    )\r\n  ) {\r\n    connection.getData({\r\n      begin: Date.now() - 60e3 * 60 * observeHours,\r\n      end: Date.now(),\r\n      requestParameter: \"t,snowdepth,r_1h\",\r\n      timestep: 60 * 60 * 1000,\r\n      bbox: \"20.6455928891, 59.846373196, 31.5160921567, 70.1641930203\",\r\n      callback: (data, errors) => {\r\n        if (errors.length > 0) {\r\n          errors.forEach(err => {\r\n            console.error(\"FMI API error: \" + err.errorText);\r\n          });\r\n          return;\r\n        }\r\n\r\n        setter(\r\n          data.locations.map(loc => {\r\n            const [lat, lon] = loc.info.position.map(parseFloat);\r\n            return { ...loc, position: { lat, lon } };\r\n          })\r\n        );\r\n\r\n        connection.disconnect();\r\n      }\r\n    });\r\n  }\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}